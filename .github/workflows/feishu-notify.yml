name: Feishu Notification

on:
  issues:
    types: [opened, closed, reopened]
  release:
    types: [published]

jobs:
  notify-issue:
    if: github.event_name == 'issues'
    runs-on: ubuntu-latest
    steps:
      - name: å‘é€ Issue é€šçŸ¥åˆ°é£ä¹¦
        uses: foxundermoon/feishu-action@v2
        with:
          url: ${{ secrets.FEISHU_WEBHOOK_URL }}
          msg_type: post
          content: |
            post:
              zh_cn:
                title: "ğŸ“‹ Issue ${{ github.event.action }}"
                content:
                  - - tag: text
                      text: "ä»“åº“: ${{ github.repository }}"
                  - - tag: text
                      text: "æ ‡é¢˜: ${{ github.event.issue.title }}"
                  - - tag: text
                      text: "æ“ä½œè€…: ${{ github.actor }}"
                  - - tag: a
                      text: "æŸ¥çœ‹ Issue"
                      href: "${{ github.event.issue.html_url }}"

  notify-release:
    if: github.event_name == 'release'
    runs-on: ubuntu-latest
    steps:
      - name: å‘é€å‘ç‰ˆé€šçŸ¥åˆ°é£ä¹¦
        uses: foxundermoon/feishu-action@v2
        with:
          url: ${{ secrets.FEISHU_WEBHOOK_URL }}
          msg_type: post
          content: |
            post:
              zh_cn:
                title: "ğŸš€ æ–°ç‰ˆæœ¬å‘å¸ƒ: ${{ github.event.release.tag_name }}"
                content:
                  - - tag: text
                      text: "ä»“åº“: ${{ github.repository }}"
                  - - tag: text
                      text: "ç‰ˆæœ¬: ${{ github.event.release.tag_name }}"
                  - - tag: text
                      text: "å‘å¸ƒè€…: ${{ github.actor }}"
                  - - tag: a
                      text: "æŸ¥çœ‹ Release"
                      href: "${{ github.event.release.html_url }}"
